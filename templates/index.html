{% extends "base.html" %}

{% block title %}Select City - Weather Dashboard{% endblock %}

{% block content %}
<div class="city-selection">
    <div class="selection-card">
        <h2><i class="fas fa-map-marker-alt"></i> Select an Indian City</h2>
        <p>Choose a city to view detailed weather information and satellite imagery</p>
        
        <div class="dropdown-container">
            <select id="citySelect" class="city-dropdown">
                <option value="">-- Select a City --</option>
                {% for city in cities %}
                <option value="{{ city }}">{{ city }}</option>
                {% endfor %}
            </select>
            <i class="fas fa-chevron-down dropdown-icon"></i>
        </div>
        
        <button id="viewWeatherBtn" class="weather-btn" disabled>
            <i class="fas fa-eye"></i> View Weather Report
        </button>
        
        <div class="popular-cities">
            <h3>Popular Cities</h3>
            <div class="city-grid">
                <div class="city-card" data-city="Mumbai">
                    <i class="fas fa-building"></i>
                    <span>Mumbai</span>
                </div>
                <div class="city-card" data-city="Delhi">
                    <i class="fas fa-landmark"></i>
                    <span>Delhi</span>
                </div>
                <div class="city-card" data-city="Bangalore">
                    <i class="fas fa-laptop-code"></i>
                    <span>Bangalore</span>
                </div>
                <div class="city-card" data-city="Chennai">
                    <i class="fas fa-ship"></i>
                    <span>Chennai</span>
                </div>
                <div class="city-card" data-city="Hyderabad">
                    <i class="fas fa-gem"></i>
                    <span>Hyderabad</span>
                </div>
                <div class="city-card" data-city="Kolkata">
                    <i class="fas fa-book"></i>
                    <span>Kolkata</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const citySelect = document.getElementById('citySelect');
    const viewWeatherBtn = document.getElementById('viewWeatherBtn');
    const cityCards = document.querySelectorAll('.city-card');
    
    // Enable/disable button based on selection
    citySelect.addEventListener('change', function() {
        viewWeatherBtn.disabled = !this.value;
    });
    
    // Handle button click
    viewWeatherBtn.addEventListener('click', function() {
        const selectedCity = citySelect.value;
        if (selectedCity) {
            window.location.href = `/weather/${selectedCity}`;
        }
    });
    
    // Handle city card clicks
    cityCards.forEach(card => {
        card.addEventListener('click', function() {
            const city = this.dataset.city;
            citySelect.value = city;
            viewWeatherBtn.disabled = false;
            
            // Add visual feedback
            cityCards.forEach(c => c.classList.remove('selected'));
            this.classList.add('selected');
        });
    });
});
</script>
{% endblock %}
